import streamlit as st
import datetime
import pandas as pd

# è¨­å®šç¶²é æ¨™é¡Œèˆ‡åœ–ç¤º
st.set_page_config(page_title="2026 æ•™ç”„è¡åˆº App", page_icon="ğŸ“")

# --- è³‡æ–™å®šç¾© ---
target_date = datetime.date(2026, 4, 6)
start_date = datetime.date(2026, 1, 4)
today = datetime.date.today()
days_left = (target_date - today).days

# æ¯é€±ä»»å‹™è³‡æ–™åº«
weekly_tasks = {
    "1æœˆ (å¯¦ç¿’æœŸ)": [
        "å°ˆæ›¸ Ch1-6 + ç‰¹æ•™æ³•æœ¬æ–‡",
        "å°ˆæ›¸ Ch7-12 + æ–½è¡Œç´°å‰‡/é‘‘å®šæ¨™æº–",
        "æ”¶é›†æ•™å­¸æª”æ¡ˆç…§ç‰‡ç´ æ",
        "è¨­è¨ˆä¸‰æŠ˜é åˆæ­¥æ¶æ§‹"
    ],
    "2æœˆ (å…¨è·æœŸ)": [
        "å°ˆæ›¸ Ch13-19 (å®Œçµ)",
        "åœ‹ä¸­è€ƒå¤é¡Œ (25ä»½) æ¯æ—¥1ä»½",
        "è£½ä½œè¬ç”¨æ•™å…· (2/5)",
        "å®Œæˆæ•™å­¸æª”æ¡ˆåˆç¨¿"
    ],
    "3æœˆ (è¡åˆºæœŸ)": [
        "é«˜ä¸­è€ƒå¤é¡Œ (40ä»½) æ¯æ—¥1.5ä»½",
        "è£½ä½œè¬ç”¨æ•™å…· (5/5) å®Œå·¥",
        "å€‹äººä¸‰æŠ˜é å®šç¨¿èˆ‡å°è£½",
        "æ³•è¦è€ƒé»æœ€å¾Œæƒæ"
    ]
}

# --- ç¶²é ä»‹é¢ ---
st.title("ğŸ“ 2026 ç‰¹æ•™æ•™ç”„å€’æ•¸è¿½è¹¤")

# 1. å€’æ•¸è¨ˆæ™‚å€å¡Š
col1, col2 = st.columns(2)
with col1:
    st.metric("å‰©é¤˜å¤©æ•¸", f"{max(0, days_left)} å¤©")
with col2:
    progress = min(100, max(0, int(( (today - start_date).days / (target_date - start_date).days ) * 100)))
    st.write(f"ç¸½è¨ˆç•«é€²åº¦: {progress}%")
    st.progress(progress)

st.divider()

# 2. ç›®å‰èº«åˆ†æé†’
if today < datetime.date(2026, 2, 1):
    st.info("ğŸ’¡ ç›®å‰èº«åˆ†ï¼š**å¯¦ç¿’ç”Ÿ (æ¯æ—¥2å°æ™‚)**\n\né‡é»ï¼šç©©å®šç´¯ç©æ³•è¦åŸºç¤ï¼Œåˆ¥è·Ÿåˆ¥äººæ¯”é¡Œé‡ã€‚")
else:
    st.warning("ğŸ”¥ ç›®å‰èº«åˆ†ï¼š**å…¨è·è€ƒç”Ÿ (æ¯æ—¥6å°æ™‚)**\n\né‡é»ï¼šå¤§é‡åˆ·é¡Œã€æª¢è¨éŒ¯é¡Œã€å®Œæˆæ•™å…·ã€‚")

# 3. äº’å‹•å¼é€²åº¦è¡¨
st.subheader("ğŸ“… æ ¸å¿ƒä»»å‹™è¿½è¹¤")
for phase, tasks in weekly_tasks.items():
    with st.expander(phase, expanded=(phase in ["1æœˆ (å¯¦ç¿’æœŸ)"] if today < datetime.date(2026, 2, 1) else True)):
        for task in tasks:
            st.checkbox(task, key=task)

# 4. è®€æ›¸æœƒæé†’
st.divider()
st.subheader("ğŸ¤ æ¯é€±äºŒè®€æ›¸æœƒ")
st.write("åˆ¥å¿˜äº†æ•´ç†æœ¬é€±çš„**æ³•è¦é›£é»**èˆ‡å¤§å®¶è¨è«–ï¼")

# 5. å¿«é€Ÿé€£çµ (å¯è‡ªè¡Œæ›´æ›ç‚ºä½ çš„é›²ç«¯è³‡æ–™å¤¾ç¶²å€)
st.sidebar.title("å¿«é€Ÿé€£çµ")
st.sidebar.button("å…¨åœ‹æ³•è¦è³‡æ–™åº«")
st.sidebar.button("é˜¿æ‘©ç·šä¸Šæ¸¬é©—")
st.sidebar.info("åŠ æ²¹ï¼åªè¦ç©©å®šåŸ·è¡Œï¼Œ4/6 å°±æ˜¯ä½ é‡‘æ¦œé¡Œåçš„æ—¥å­ï¼")
